import{a as w,D as M,r as f,n as V,o as i,c as d,b as s,w as u,v as h,u as n,e as Y,F as y,f as x,g as D,t as p}from"./vendor.0d39b0e1.js";import{u as H,a as B,r as T}from"./index.397965a6.js";const S=H();async function E(r){return await S.api("comments/task/"+r)}async function F(r){return await S.api("comments/",r)}const A=s("div",{class:"my-3 py-3"},[s("h3",null,"Task Details")],-1),L=["onSubmit"],N={class:"field"},R={class:"control is-medium"},$={class:"form-floating"},j=s("label",{for:"floatingInputGrid"},"Task Title",-1),q={class:"field"},z={class:"control is-medium"},J={class:"form-floating"},K=s("label",{for:"floatingInputGrid"},"Due Date",-1),O={class:"field"},P={class:"control is-medium"},Q={class:"form-floating"},W=["value"],X=s("label",{for:"floatingSelectGrid"},"Assign to",-1),Z=s("button",{class:"button is-primary btn-success"},"Update Task",-1),ss=s("hr",null,null,-1),ts=s("div",{class:"my-3 py-3"},[s("h3",null,"Comments")],-1),es={class:"my-3 py-3"},os={class:"card"},as={class:"card-header"},ns={class:"card-header-title"},ls=s("div",{class:"card-header-icon"},[s("span",{class:"icon"},[s("i",{class:"fas fa-user"})])],-1),is={class:"card-content"},ds={class:"content"},rs={class:"field form-floating"},cs=s("label",{for:"floatingTextarea2"},"Comment",-1),us=s("button",{class:"button is-primary is-light is-outlined"},"Add Comment",-1),fs=w({setup(r){const C=M(),v=B(),l=H();let o;const m=f([]);let g;const _=f(""),k=C.params.id;v.tasks.forEach(a=>{a._id===k&&(a.dueDate=V(a.dueDate).format("YYYY-MM-DD"),o=a,console.log(o))});const c=f();!l.userHandles||l.userHandles.length===0?l.GetUserHandles().then(()=>{c.value=l.userHandles}):c.value=l.userHandles,E(k).then(a=>{m.value=a,m.value.forEach(e=>{var t,b;e.userHandel=(b=(t=c.value)==null?void 0:t.find(U=>U._id===e.userId))==null?void 0:b.handle})});function G(){v.updateTask(o._id,o).then(()=>{T.push({path:"/tasks"})})}function I(a){g={taskId:o._id,text:_.value,isReply:a},F(g).then(e=>{T.push({path:"/tasks"})})}return(a,e)=>(i(),d("div",null,[A,s("form",{class:"form",onSubmit:D(G,["prevent"])},[s("div",N,[s("div",R,[s("div",$,[u(s("input",{type:"text",class:"form-control",id:"floatingInputGrid","onUpdate:modelValue":e[0]||(e[0]=t=>n(o).title=t)},null,512),[[h,n(o).title]]),j])])]),s("div",q,[s("div",z,[s("div",J,[u(s("input",{class:"form-control",id:"floatingInputGrid",type:"date","onUpdate:modelValue":e[1]||(e[1]=t=>n(o).dueDate=t)},null,512),[[h,n(o).dueDate]]),K])])]),s("div",O,[s("div",P,[s("div",Q,[u(s("select",{"onUpdate:modelValue":e[2]||(e[2]=t=>n(o).assignedTo=t),class:"form-select",id:"floatingSelectGrid","aria-label":"Floating label select example"},[(i(!0),d(y,null,x(c.value,t=>(i(),d("option",{value:t==null?void 0:t._id},p(t==null?void 0:t.handle),9,W))),256))],512),[[Y,n(o).assignedTo]]),X])])]),Z],40,L),ss,ts,(i(!0),d(y,null,x(m.value,t=>(i(),d("div",es,[s("div",os,[s("div",as,[s("div",ns,p(t==null?void 0:t.userHandel),1),ls]),s("div",is,[s("div",ds,p(t==null?void 0:t.text),1)])])]))),256)),s("form",{class:"form my-3",onSubmit:e[4]||(e[4]=D(t=>I(!1),["prevent"]))},[s("div",rs,[u(s("textarea",{class:"form-control",placeholder:"Leave a comment here",id:"floatingTextarea2",style:{height:"100px"},"onUpdate:modelValue":e[3]||(e[3]=t=>_.value=t)},null,512),[[h,_.value]]),cs]),us],32)]))}});export{fs as default};
